/*
 * jQuery Repeat Fields v1.0.0
 * https://github.com/devcoffee-net/repeat-fields
 *
 * Copyright (c) 2017 Hieu Nguyen
 * License MIT
 */

!function(e){e.fn.repeat_fields=function(t){function r(t){e(n.wrapper,t).each(function(t,a){var i=this,p=e(i).children(n.container);e(p).children(n.template).hide().find(":input").each(function(){e(this).prop("disabled",!0)});var c=e(p).children(n.row).filter(function(){return!e(this).hasClass(n.template.replace(".",""))}).length;if(e(p).attr("data-rf-row-count",c),e(i).on("click",n.add,function(t){t.stopImmediatePropagation();var a=e(e(p).children(n.template).clone().removeClass(n.template.replace(".",""))[0].outerHTML);e(a).find(":input").each(function(){e(this).prop("disabled",!1)});var i=e(a);if("function"==typeof n.before_add)switch(n.before_add(p,i)){case!1:return}n.use_prepend?e(i).show().prependTo(p):e(i).show().appendTo(p),"function"==typeof n.after_add&&n.after_add(p,i,o),r(i)}),e(i).on("click",n.remove,function(t){t.stopImmediatePropagation();var r=e(this).parents(n.row).first();if("function"==typeof n.before_remove)switch(n.before_remove(p,r)){case!1:return}r.remove(),"function"==typeof n.after_remove&&n.after_remove(p)}),n.is_sortable===!0&&"undefined"!=typeof e.ui&&"undefined"!=typeof e.ui.sortable){var d=null!==n.sortable_options?n.sortable_options:{};d.handle=n.move,e(i).find(n.container).sortable(d)}})}function o(t,r){var o=e(t).attr("data-rf-row-count");o++,e("*",r).each(function(){e.each(this.attributes,function(e,t){this.value=this.value.replace(n.row_count_placeholder,o-1)})}),e(t).attr("data-rf-row-count",o)}var a={wrapper:".repeat-wrapper",container:".repeat-container",row:".repeat-row",add:".repeat-add",remove:".repeat-remove",move:".repeat-move",template:".repeat-template",is_sortable:!0,use_prepend:!1,before_add:null,after_add:o,before_remove:null,after_remove:null,sortable_options:null,row_count_placeholder:"{{repeat-row-count-placeholder}}"},n=e.extend({},a,t);r(this)}}(jQuery);